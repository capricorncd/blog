<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,user-scalable=no">
    <title>Baidu translate</title>
</head>
<body>

<div>
  <div>
    <input type="text" value="word">
  </div>
  <div>
    <button>Translate</button>
  </div>
</div>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/md5.min.js"></script>
<script>
  const URL = 'https://fanyi.baidu.com/gettts?lan=en&text={word}&spd=3&source=web'
  let $input = $('input')
  $('button').addEventListener('click', function () {
    let word = $input.value
    if (word) {
      playWord(word)
    }
  })

  const fetchOptions = {
    method: 'GET',
    proxy: {
      host: 'fanyi.baidu.com',
    },
  }

  function playWord (word) {
    let url = `/gettts?lan=en&text=${word}&spd=3&source=web`
    fetchOptions.url = url
    axios.request(fetchOptions).then(res => {
      log(res)
    }).catch(err => {
      console.error(err)
    })
    // fetch(url, fetchOptions).then(res => {
    //   log(res)
    // }).catch(err => {
    //   console.error(err)
    // })
  }

  function $ (s) {
    return document.querySelector(s)
  }

  function log () {
    console.log.apply(null, arguments)
  }
</script>
</body>
</html>
