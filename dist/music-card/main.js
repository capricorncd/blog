!function(e){function t(t){for(var r,n,o=t[0],p=t[1],c=t[2],l=0,u=[];l<o.length;l++)n=o[l],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&u.push(a[n][0]),a[n]=0;for(r in p)Object.prototype.hasOwnProperty.call(p,r)&&(e[r]=p[r]);for(d&&d(t);u.length;)u.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],r=!0,o=1;o<i.length;o++){var p=i[o];0!==a[p]&&(r=!1)}r&&(s.splice(t--,1),e=n(n.s=i[0]))}return e}var r={},a={0:0},s=[];function n(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=r,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var o=window.webpackJsonp=window.webpackJsonp||[],p=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=p;s.push([54,1]),i()}([,,,,function(e,t,i){var r=i(3),a=i(40);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var s={insert:"head",singleton:!1};r(a,s);e.exports=a.locals||{}},function(e,t,i){var r=i(3),a=i(42);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var s={insert:"head",singleton:!1};r(a,s);e.exports=a.locals||{}},function(e,t,i){var r=i(3),a=i(44);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var s={insert:"head",singleton:!1};r(a,s);e.exports=a.locals||{}},function(e,t,i){var r=i(3),a=i(46);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var s={insert:"head",singleton:!1};r(a,s);e.exports=a.locals||{}},function(e,t,i){var r=i(3),a=i(48);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var s={insert:"head",singleton:!1};r(a,s);e.exports=a.locals||{}},function(e,t,i){var r=i(3),a=i(50);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var s={insert:"head",singleton:!1};r(a,s);e.exports=a.locals||{}},function(e,t,i){"use strict";t.a=i.p+"static/img/arrow-down-small@2x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/arrow-down-small@3x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/question-mark@2x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/question-mark@3x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/pause@2x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/pause@3x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/pause-press@2x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/pause-press@3x.png"},,function(e,t,i){"use strict";t.a=i.p+"static/img/music-box@2x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/music-box@3x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/tone-arm@2x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/tone-arm@3x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/record@2x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/record@3x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/play@2x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/play@3x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/send-private@2x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/send-private@3x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/btn-heart@2x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/btn-heart@3x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/heart@2x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/heart@3x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/btn-next@2x.png"},function(e,t,i){"use strict";t.a=i.p+"static/img/btn-next@3x.png"},,,function(e,t,i){var r=i(3),a=i(38);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var s={insert:"head",singleton:!1};r(a,s);e.exports=a.locals||{}},function(e,t,i){"use strict";i.r(t);var r=i(2),a=i.n(r)()(!1);a.push([e.i,"html,body{margin:0;padding:0;font-size:16px;height:100%;font-family:PingFang SC,Verdana,Helvetica Neue,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}body{padding-top:60px;background:linear-gradient(135deg, #8988df 10%, #8988df 20%, #8b9ce9 59%, #8b9ce9 60%, #8face3);overflow:hidden}.font-size-zero{font-size:0}*{box-sizing:border-box;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}header{position:fixed;z-index:10;top:0;left:0;width:100%;height:60px;background:rgba(36,41,46,.2)}header h1{color:#fff;line-height:60px;margin:0 0 0 20px;font-weight:500;font-size:24px}header a{display:inline-block;position:absolute;right:20px;top:50%;margin-top:-12px;font-size:0;opacity:.6}header a:hover{opacity:.8}header svg{fill:currentColor;color:#fff}@media screen and (max-width: 640px){header{height:30px}header h1{line-height:30px;font-size:14px}header a{transform:scale(0.8);transform-origin:right center}}main{outline:none}@keyframes spin{to{transform:rotate(1turn)}}@keyframes shakeHide{15%{opacity:.5}30%{opacity:.9;transform:scale(1)}100%{opacity:0;transform:scale(0)}}@keyframes shakeShow{0%{opacity:0;transform:scale(0)}40%{opacity:.9;transform:scale(1.2)}60%{transform:scale(0.9)}80%{transform:scale(1.1)}100%{opacity:1;transform:scale(1)}}@keyframes shake{0%{transform:translateX(0)}20%{transform:translateX(5px)}40%{transform:translateX(-5px)}60%{transform:translateX(5px)}80%{transform:translateX(-5px)}100%{transform:translateX(0)}}@keyframes card-in{from{opacity:0;transform:translateX(200%)}to{opacity:1;transform:translateX(0)}}@keyframes card-out{from{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(-200%)}}@keyframes tow-second-hide{0%{opacity:0}2%,98%{opacity:1;pointer-events:auto}100%{opacity:0;pointer-events:none}}.fade-left-enter-active,.fade-left-leave-active{transition:all .5s}.fade-left-enter,.fade-left-leave-to{transform:translateX(-50px);opacity:0}.send-private-enter-active,.send-private-leave-active{transition:all .5s}.send-private-enter,.send-private-leave-to{transform:translateX(50px);opacity:0}.fade-center-enter-active,.fade-center-leave-active{transition:all .5s}.fade-center-enter,.fade-center-leave-to{transform:scale(0);opacity:0}",""]),t.default=a},function(e,t,i){"use strict";var r=i(4);i.n(r).a},function(e,t,i){"use strict";i.r(t);var r=i(2),a=i.n(r),s=i(0),n=i.n(s),o=i(10),p=i(11),c=i(12),d=i(13),l=a()(!1),u=n()(o.a),h=n()(p.a),g=n()(c.a),m=n()(d.a);l.push([e.i,'.tags-wrapper{position:relative;display:flex}.tags-wrapper span{display:inline-block;padding:0 10px;background-color:rgba(0,0,0,.16);margin-right:10px;height:26px;line-height:26px;border-radius:13px;font-size:12px;color:#fff;cursor:pointer}.tags-wrapper span.first{padding-right:20px;position:relative}.tags-wrapper span.first:after{content:"";position:absolute;top:11px;right:10px;width:5px;height:4px;background-image:url('+u+");-webkit-background-size:cover;background-size:cover;transition:transform .2s ease-in-out}@media(-webkit-min-device-pixel-ratio: 3),(min-device-pixel-ratio: 3){.tags-wrapper span.first:after{background-image:url("+h+")}}.tags-wrapper .question-mark{position:absolute;z-index:1;top:0;right:6px;width:26px;height:26px;background-image:url("+g+");-webkit-background-size:15px 15px;background-size:15px 15px;background-repeat:no-repeat;background-position:center center}@media(-webkit-min-device-pixel-ratio: 3),(min-device-pixel-ratio: 3){.tags-wrapper .question-mark{background-image:url("+m+")}}.tags-wrapper.show .first:after{transform:rotate(-90deg)}",""]),t.default=l},function(e,t,i){"use strict";var r=i(5);i.n(r).a},function(e,t,i){"use strict";i.r(t);var r=i(2),a=i.n(r),s=i(0),n=i.n(s),o=i(10),p=i(11),c=i(12),d=i(13),l=i(19),u=i(20),h=i(21),g=i(22),m=i(23),f=i(24),v=i(25),w=i(26),x=i(14),b=i(15),y=i(16),k=i(17),_=a()(!1),C=n()(o.a),z=n()(p.a),$=n()(c.a),P=n()(d.a),T=n()(l.a),A=n()(u.a),M=n()(h.a),E=n()(g.a),S=n()(m.a),H=n()(f.a),O=n()(v.a),L=n()(w.a),N=n()(x.a),q=n()(b.a),j=n()(y.a),V=n()(k.a);_.push([e.i,'.music-card-page{display:none;position:fixed;z-index:5;left:50%;top:50%;transform:translate(-50%, -50%);width:295px}.music-card-page .tags-wrapper{position:relative;display:flex}.music-card-page .tags-wrapper span{display:inline-block;padding:0 10px;background-color:rgba(0,0,0,.16);margin-right:10px;height:26px;line-height:26px;border-radius:13px;font-size:12px;color:#fff}.music-card-page .tags-wrapper span.first{padding-right:20px;position:relative}.music-card-page .tags-wrapper span.first:after{content:"";position:absolute;top:11px;right:10px;width:5px;height:4px;background-image:url('+C+");-webkit-background-size:cover;background-size:cover;transition:transform .2s}@media(-webkit-min-device-pixel-ratio: 3),(min-device-pixel-ratio: 3){.music-card-page .tags-wrapper span.first:after{background-image:url("+z+")}}.music-card-page .tags-wrapper .question-mark{position:absolute;z-index:1;top:0;right:6px;width:26px;height:26px;background-image:url("+$+");-webkit-background-size:15px 15px;background-size:15px 15px;background-repeat:no-repeat;background-position:center center}@media(-webkit-min-device-pixel-ratio: 3),(min-device-pixel-ratio: 3){.music-card-page .tags-wrapper .question-mark{background-image:url("+P+")}}.music-card-page .tags-wrapper.show .first:after{transform:rotate(-90deg)}.music-card-page .card-wrapper{margin-top:19px;padding-bottom:15px;height:356px;box-shadow:0 8px 10px 0 rgba(0,0,0,.1);border-radius:25px;background-image:url("+T+");-webkit-background-size:100% auto;background-size:100% auto}@media(-webkit-min-device-pixel-ratio: 3),(min-device-pixel-ratio: 3){.music-card-page .card-wrapper{background-image:url("+A+")}}.music-card-page .card-wrapper .card-inner{position:relative;padding:49px 36px 75px}.music-card-page .card-wrapper .tone-arm{position:absolute;z-index:5;top:18px;right:18px;width:41px;height:114px;background-image:url("+M+");-webkit-background-size:cover;background-size:cover;transform:rotate(0);transform-origin:53% 13%;cursor:move}@media(-webkit-min-device-pixel-ratio: 3),(min-device-pixel-ratio: 3){.music-card-page .card-wrapper .tone-arm{background-image:url("+E+')}}.music-card-page .card-wrapper .tone-arm.touch-out{transition:all .5s ease}.music-card-page .card-wrapper .gramophone-wrapper{position:relative;width:100%}.music-card-page .card-wrapper .gramophone-wrapper:after{content:"";display:block;padding-bottom:100%}.music-card-page .card-wrapper .gramophone-wrapper .swiper-container{position:absolute;top:0;bottom:0}.music-card-page .card-wrapper .gramophone-wrapper .swiper-container .swiper-slide{position:relative;box-sizing:border-box;padding:15px;overflow:hidden;text-align:center}.music-card-page .card-wrapper .gramophone-wrapper .record-wrapper{display:inline-block;padding:38px;overflow:hidden;border-radius:50%;background-image:url('+S+");-webkit-background-size:cover;background-size:auto 100%}@media(-webkit-min-device-pixel-ratio: 3),(min-device-pixel-ratio: 3){.music-card-page .card-wrapper .gramophone-wrapper .record-wrapper{background-image:url("+H+")}}.music-card-page .card-wrapper .gramophone-wrapper .record-wrapper .record{width:100%;height:100%;overflow:hidden;animation:spin 10s infinite linear;animation-play-state:paused;border-radius:50%;display:flex;align-items:center;justify-content:center}.music-card-page .card-wrapper .gramophone-wrapper .record-wrapper .record.running{animation-play-state:running}.music-card-page .card-wrapper .gramophone-wrapper .record-wrapper .record img{width:100%;height:auto}.music-card-page .card-wrapper .play-btn{position:absolute;left:15px;bottom:15px;width:53px;height:53px;background-image:url("+O+");-webkit-background-size:cover;background-size:cover;cursor:pointer}@media(-webkit-min-device-pixel-ratio: 3),(min-device-pixel-ratio: 3){.music-card-page .card-wrapper .play-btn{background-image:url("+L+")}}.music-card-page .card-wrapper .play-btn:active{background-image:url("+O+")}@media(-webkit-min-device-pixel-ratio: 3),(min-device-pixel-ratio: 3){.music-card-page .card-wrapper .play-btn:active{background-image:url("+L+")}}.music-card-page .card-wrapper .message{position:absolute;right:15px;bottom:15px;padding:0 13px;height:26px;line-height:24px;border-radius:13px;background-color:#fff;color:#7671db;font-size:12px;box-sizing:border-box;border:1px solid #ccc;max-width:200px;transition:all .3s}.music-card-page .card-wrapper .message.is-private{color:#fff;border-color:#8a7ddd;background-color:#8a7ddd}.music-card-page .play .tone-arm{transform:rotate(42deg)}.music-card-page .play .play-btn{background-image:url("+N+")}@media(-webkit-min-device-pixel-ratio: 3),(min-device-pixel-ratio: 3){.music-card-page .play .play-btn{background-image:url("+q+")}}.music-card-page .play .play-btn:active{background-image:url("+j+")}@media(-webkit-min-device-pixel-ratio: 3),(min-device-pixel-ratio: 3){.music-card-page .play .play-btn:active{background-image:url("+V+")}}",""]),t.default=_},function(e,t,i){"use strict";var r=i(6);i.n(r).a},function(e,t,i){"use strict";i.r(t);var r=i(2),a=i.n(r)()(!1);a.push([e.i,'.zx-play-schedule-component{position:absolute;top:0;left:0;width:100%;height:100%;transform:rotate(270deg)}.zx-play-schedule-component:before{content:"";display:none;position:absolute;z-index:0;right:2px;bottom:50%;margin-bottom:-1.5px;width:3px;height:3px;border-radius:50%;background-color:#7671db;transition:all .3s}.zx-play-schedule-component .dot{display:none;position:absolute;z-index:3;top:0;left:111.5px;width:6px;height:6px;border-radius:50%;background-color:#a4a0f7;transform-origin:0 111px;transform:rotate(90deg)}.zx-play-schedule-component canvas{position:absolute;z-index:1;top:0;left:0;transform-origin:0 0;transform:scale(0.5)}.zx-play-schedule-component._progress:before{display:block}.zx-play-schedule-component._progress .dot{display:inline-block}.zx-play-schedule-component ._mask{position:absolute;z-index:2;top:0;left:0;border-radius:50%;width:100%;height:100%;border:2px solid #fefefe}.zx-play-schedule-component ._mask:before{content:"";position:absolute;left:3px;right:3px;bottom:3px;top:3px;border:2px solid #fefefe;border-radius:50%}',""]),t.default=a},function(e,t,i){"use strict";var r=i(7);i.n(r).a},function(e,t,i){"use strict";i.r(t);var r=i(2),a=i.n(r)()(!1);a.push([e.i,".no-more-cards{position:absolute;z-index:9999;top:50%;left:50%;margin:-18px 0 0 -72px;padding:0 20px;background:rgba(0,0,0,.4);border-radius:18px;width:145px;height:36px;line-height:36px;font-size:15px;color:#fff;transform:scale(1)}",""]),t.default=a},function(e,t,i){"use strict";var r=i(8);i.n(r).a},function(e,t,i){"use strict";i.r(t);var r=i(2),a=i.n(r),s=i(0),n=i.n(s),o=i(14),p=i(15),c=i(16),d=i(17),l=i(27),u=i(28),h=i(29),g=i(30),m=i(31),f=i(32),v=i(33),w=i(34),x=a()(!1),b=n()(o.a),y=n()(p.a),k=n()(c.a),_=n()(d.a),C=n()(l.a),z=n()(u.a),$=n()(h.a),P=n()(g.a),T=n()(m.a),A=n()(f.a),M=n()(v.a),E=n()(w.a);x.push([e.i,".music-card-container{position:fixed;z-index:5;left:50%;top:50%;transform:translate(-50%, -50%);width:295px}.play .tone-arm{transform:rotate(42deg)}.play .play-btn{background-image:url("+b+")}@media(-webkit-min-device-pixel-ratio: 3),(min-device-pixel-ratio: 3){.play .play-btn{background-image:url("+y+")}}.play .play-btn:active{background-image:url("+k+")}@media(-webkit-min-device-pixel-ratio: 3),(min-device-pixel-ratio: 3){.play .play-btn:active{background-image:url("+_+")}}.music-card-page .ft-wrapper{position:relative;display:flex;justify-content:center}.music-card-page .ft-wrapper>div{margin:30px 20px 0;box-shadow:0 8px 20px 0 rgba(0,0,0,.1);border-radius:50%}.music-card-page .ft-wrapper dl.send-private{display:inline-block;position:absolute;top:45px;left:0;width:40px;height:40px;background-image:url("+C+");-webkit-background-size:cover;background-size:cover;background-repeat:no-repeat;border-radius:50%;box-shadow:0 8px 20px 0 rgba(0,0,0,.1);cursor:pointer}@media(-webkit-min-device-pixel-ratio: 3),(min-device-pixel-ratio: 3){.music-card-page .ft-wrapper dl.send-private{background-image:url("+z+')}}.music-card-page .ft-wrapper dl.send-private dd{display:flex;align-items:center;position:absolute;top:48px;left:0;padding:0 12px;height:42px;line-height:1;background-color:#ff88d6;border-radius:12px;color:#fff;white-space:nowrap;font-size:12px;margin:0}.music-card-page .ft-wrapper dl.send-private dd:before{content:"";position:absolute;top:-4px;left:15px;border-bottom:5px solid #ff88d6;border-left:5px transparent solid;border-right:5px transparent solid}.music-card-page .ft-wrapper dl.send-private.__show dd{animation:tow-second-hide 3s forwards}.music-card-page .ft-wrapper dl.send-private.__hide dd{display:none}.music-card-page .ft-wrapper .praise{width:70px;height:70px;background-image:url('+$+");-webkit-background-size:cover;background-size:cover;background-repeat:no-repeat;background-position:center center;cursor:pointer}@media(-webkit-min-device-pixel-ratio: 3),(min-device-pixel-ratio: 3){.music-card-page .ft-wrapper .praise{background-image:url("+P+")}}.music-card-page .ft-wrapper .praise.hide{animation:shakeHide .3s}.music-card-page .ft-wrapper .praise.done{background-image:url("+T+");background-size:80% auto;border-radius:0;box-shadow:0 0 0 rgba(0,0,0,0)}@media(-webkit-min-device-pixel-ratio: 3),(min-device-pixel-ratio: 3){.music-card-page .ft-wrapper .praise.done{background-image:url("+A+")}}.music-card-page .ft-wrapper .praise.shake-show{animation:shakeShow .3s}.music-card-page .ft-wrapper .praise.shake{animation:shake .3s}.music-card-page .ft-wrapper .next{width:70px;height:70px;background-image:url("+M+");-webkit-background-size:cover;background-size:cover;cursor:pointer}@media(-webkit-min-device-pixel-ratio: 3),(min-device-pixel-ratio: 3){.music-card-page .ft-wrapper .next{background-image:url("+E+")}}@media screen and (max-width: 320px){.music-card-page{transform:translate(-50%, -50%) scale(0.8)}}",""]),t.default=x},function(e,t,i){"use strict";var r=i(9);i.n(r).a},function(e,t,i){"use strict";i.r(t);var r=i(2),a=i.n(r)()(!1);a.push([e.i,".wave-wrapper{position:fixed;bottom:5px;left:0;width:100%;height:128px}",""]),t.default=a},,,,function(e,t,i){"use strict";i.r(t);var r=i(36),a=(i(37),function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("header",[t("h1",[this._v("Music Card (Vue2)")]),this._v(" "),t("a",{attrs:{href:"https://github.com/capricorncd/blog",target:"_blank"}},[t("svg",{attrs:{height:"24",viewBox:"0 0 16 16",version:"1.1",width:"24","aria-hidden":"true"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"}})])])]),this._v(" "),t("MusicCard"),this._v(" "),t("WaveWrapper")],1)});a._withStripped=!0;var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"wp",staticClass:"music-card-page"},[i("zx-tag",{ref:"tag",on:{change:e.tagChange}}),e._v(" "),i("div",{class:["card-wrapper",e.isPlay?"play":""]},[i("div",{staticClass:"card-inner"},[i("div",{ref:"toneArm",staticClass:"tone-arm",class:{"touch-out":!e.isTouchOnArm}}),e._v(" "),i("div",{staticClass:"gramophone-wrapper"},[i("zx-play-schedule",{attrs:{progress:e.progress}}),e._v(" "),i("zx-card",{ref:"card",attrs:{gender:e.gender,progress:e.progress,"is-play":e.isPlay},on:{"no-cards":function(t){e.isNoCards=!0},change:e.cardChange,pause:e.pause,play:e.play,"list-change":function(t){return e.total=t}}}),e._v(" "),i("transition",{attrs:{name:"fade-center"}},[i("NoMoreCards",{model:{value:e.isNoCards,callback:function(t){e.isNoCards=t},expression:"isNoCards"}})],1)],1),e._v(" "),i("div",{staticClass:"play-btn",on:{click:e.clickPlay}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.cardLabel,expression:"cardLabel"}],staticClass:"message ell",class:e.isPrivate?"is-private":""},[e._v(e._s(e.cardLabel))])])]),e._v(" "),i("div",{staticClass:"ft-wrapper"},[i("transition",{attrs:{name:"send-private"}},[i("dl",{directives:[{name:"show",rawName:"v-show",value:e.privateBtnVisible,expression:"privateBtnVisible"}],class:["send-private",e.privateBtnVisible?"__show":"__hide"],on:{click:e.sendPrivate}},[i("dd",[e._v("Click send private card, "),i("br"),e._v("the other party will receive it at the first time")])])]),e._v(" "),i("zx-praise",{attrs:{"is-error":e.isError,item:e.currentCard||{}},on:{change:e.praiseStateChange}}),e._v(" "),i("div",{staticClass:"next",on:{click:e.next}})],1)],1)};s._withStripped=!0;const n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,100)},o=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||function(e){window.clearTimeout(e)},p={beforeDestroy(){this.animeTimer&&o(this.animeTimer),this.$audio.removeEventListener("error",this._audioHander),this.$audio.removeEventListener("ended",this._audioHander),this.$audio.removeEventListener("pause",this._audioHander),this.$audio.removeEventListener("play",this._audioHander),this.$audio.removeEventListener("canplay",this._canplayHandler),document.removeEventListener("keyup",this.keyupHandler),App.off("change")}};function c(e){const t=this,i=App.query(".gramophone-wrapper").offsetWidth,r=(window.innerWidth-i)/2,a=this.$refs.swiper;if(a.style.left=-r+"px",a.style.right=-r+"px",a.style.top=0,a.style.bottom=0,e){const e=App.createElm("style",{type:"text/css"});e.innerText=`.swiper-container .swiper-slide .record-wrapper{width:${i-30}px;height:${i-30}px;}`,App.query("head").appendChild(e)}let s,n,o;this.swiper=new Swiper(this.$refs.swiper,{speed:500,allowSlidePrev:!1,preventInteractionOnTransition:!0,on:{slideChange:function(){t.isPlay&&t.$emit("pause"),t.index=this.activeIndex},slideChangeTransitionStart:function(){t.isPlay&&t.$emit("pause")},slideChangeTransitionEnd:function(){t.index!==this.activeIndex&&(t.index=this.activeIndex),t.$nextTick(e=>{t.$emit("play")})},touchStart:function(e){s=e.targetTouches?e.targetTouches[0]:e,n=s?s.pageX:0},touchMove:function(e){s=e.targetTouches?e.targetTouches[0]:e,o=s?s.pageX:0},touchEnd:function(){n-o>50&&t.index===t.list.length-1&&t.$emit("no-cards")}}})}function d(){this.$audio.addEventListener("error",this._audioHandler),this.$audio.addEventListener("ended",this._audioHandler),this.$audio.addEventListener("pause",this._audioHandler),this.$audio.addEventListener("play",this._audioHandler),this.$audio.addEventListener("canplay",this._canplayHandler),this.$audio.addEventListener("canplaythrough",this._canplayHandler)}const l=window.navigator,u=l.msPointerEnabled,h=l.pointerEnabled,g="ontouchstart"in window||!!(window.DocumentTouch&&document instanceof DocumentTouch);let m=["mousedown","mousemove","mouseup","mouseleave"];u&&(m=["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut"]),h&&(m=["pointerdown","pointermove","pointerup","pointerout"]);const f={start:g?"touchstart":m[0],move:g?"touchmove":m[1],end:g?"touchend":m[2],leave:g?"touch":m[3]};function v(){const e=this,t=this.$toneArm;let i;try{i=t.getBoundingClientRect()}catch(e){const r=this.$wrapper,a=(window.innerHeight-r.clientHeight)/2;i={x:(window.innerWidth-r.clientWidth)/2+App.query(".card-inner").clientWidth-t.clientWidth-18,y:a+App.query(".tags-wrapper").clientHeight+19+18,width:t.clientWidth,height:t.clientHeight}}const r={x:i.x+.53*i.width,y:i.y+.13*i.height};let a,s=!1,n={},o=0,p=null;t.addEventListener(f.start,e=>{if(!this.isError)if(this.isTouchOnArm=!0,s="touchstart"===e.type,s||!("which"in e)||3!==e.which){if(a=function(e){const t=window.getComputedStyle(e,null),i=(t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform")||"FAIL").split("(")[1].split(")")[0].split(","),r=i[0],a=i[1];return Math.round(Math.atan2(a,r)*(180/Math.PI))}(t),!s||1===e.targetTouches.length){s||x()||(e.preventDefault?e.preventDefault():e.returnValue=!1);const t=s?e.targetTouches[0].pageX:e.pageX||e.clientX,i=s?e.targetTouches[0].pageY:e.pageY||e.clientY;n={x:t,y:i}}}else this.isTouchOnArm=!1}),t.addEventListener(f.move,e=>{this.isTouchOnArm&&(s||x()||(e.preventDefault?e.preventDefault():e.returnValue=!1),o=function(e,t,i,r){const s=r?i.targetTouches[0].pageX:i.pageX||i.clientX,n=r?i.targetTouches[0].pageY:i.pageY||i.clientY,o=function(e,t,i){const r=Math.sqrt(w(e.x-t.x)+w(t.y-e.y)),a=Math.sqrt(w(i.x-e.x)+w(i.y-e.y)),s=Math.sqrt(w(t.x-i.x)+w(i.y-t.y)),n=(w(r)+w(a)-w(s))/(2*r*a);return Math.acos(n)*(180/Math.PI)}(e,t,{x:s,y:n})*(s-t.x>0?-1:1)+a;return o>75?75:o<0?0:o}(r,n,e,s),t.style.transform=`rotate(${o}deg)`,p||(p=setTimeout(e=>{o<=20&&this.isPlay?this.pause():o>21&&!this.isPlay&&this.play(),clearTimeout(p),p=null},300)))}),window.addEventListener(f.end,i=>{e.isTouchOnArm=!1,e.$nextTick(i=>{t.style.transform=`rotate(${e.isPlay?42:0}deg)`})})}function w(e){return Math.abs(e*e)}function x(){return/android/gi.test(navigator.userAgent)}function b(e,t){const i=e.$wrapper;i.style.display="block";const r=t||{},a=i.offsetHeight,s=window.innerHeight-App.int(r.headerHeight)-App.int(r.footerHeight)-a-100;s<0&&(i.style.transform=`scale(${1-Math.abs(s)/window.innerHeight}) translate(-50%, -50%)`,i.style.transformOrigin="0 0"),App.emit("wrapper-showed"),v.call(e)}function y(e){return e*Math.PI/180}function k(e,t){return e&&e&&e.lng>0&&e.lat>0&&t.lng>0&&t.lat>0?App.int(function(e,t){const i=y(e.lat),r=y(t.lat),a=i-r,s=y(e.lng)-y(t.lng);let n=2*Math.asin(Math.sqrt(Math.pow(Math.sin(a/2),2)+Math.cos(i)*Math.cos(r)*Math.pow(Math.sin(s/2),2)));return n*=6378.137,1e3*n}(e,t)):0}var _=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tags-wrapper",class:{show:e.tagsVisible}},[i("span",{staticClass:"first",on:{click:function(t){return t.stopPropagation(),e.clickTag(null)}}},[e._v(e._s(e.currentTag))]),e._v(" "),i("transition",{attrs:{name:"fade-left"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.tagsVisible,expression:"tagsVisible"}]},e._l(e.tags,(function(t,r){return i("span",{key:r,on:{click:function(i){return i.stopPropagation(),e.clickTag(t)}}},[e._v(e._s(t))])})),0)]),e._v(" "),i("i",{staticClass:"question-mark",on:{click:e.questionClick}})],1)};_._withStripped=!0;const C=["Everyone","Only boys","Only girls"];var z={beforeDestroy(){window.removeEventListener("click",this._docClick)},data:()=>({tags:C.slice(1),currentTag:"Everyone",tagsVisible:!1}),methods:{clickTag(e){if(e){if(this.currentTag!==e){this.currentTag=e,this.tagsVisible=!1;let t=setTimeout(i=>{this.tags=C.filter(t=>t!==e),clearTimeout(t),t=null},300);const i=C.findIndex(t=>t===e);this.$emit("change",i)}}else this.tagsVisible=!this.tagsVisible},_docClick(){this.tagsVisible&&(this.tagsVisible=!1)},questionClick(){console.log("showHelpDialog"),alert("Interact with native app")}},mounted(){window.addEventListener("click",this._docClick)}},$=(i(39),i(1)),P=Object($.a)(z,_,[],!1,null,null,null);P.options.__file="src/components/Tag.vue";var T=P.exports,A=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"swiper",staticClass:"swiper-container"},[i("div",{staticClass:"swiper-wrapper"},e._l(e._list,(function(t,r){return i("div",{key:r,staticClass:"swiper-slide"},[i("div",{class:["record-wrapper",e.index===r?"current":"",e.index>r?"done":""]},[i("div",{class:["record",r===e.index&&e.isPlay&&e.progress?"running":"paused"]},[i("img",{attrs:{src:t.url.thumb,alt:""},on:{load:e.recordLoad}})])])])})),0)])};A._withStripped=!0;const M=[{uid:5,gender:1,lat:31.57868,lng:108.063343,url:{thumb:"./static/covers/people-who-choose-songs.jpg",url:"./static/audio/people-who-choose-songs.mp4"}},{uid:1,gender:2,lat:30.57868,lng:104.063343,url:{thumb:"./static/covers/old-dream.jpg",url:"./static/audio/old-dream.mp4"}},{uid:6,gender:0,lat:30.67868,lng:104.063343,url:{thumb:"./static/covers/total-soccer.jpg",url:"./static/audio/total-soccer.mp3"}}];var E={created(){App.on("wrapper-showed",e=>{c.call(this,!0)}),this.getList()},computed:{_list(){return this.list.filter(e=>!!e)}},data:()=>({index:-1,swiper:null,list:[],isFirstRequest:!0}),methods:{getList(){let e=M;this.isFirstRequest&&(e.length>0?this.isFirstRequest=!1:0===this.list.length&&this.$emit("no-cards")),this.list.length&&(e=this.list.concat(e.filter(e=>e.url))),this.list=this.gender>0?e.filter(e=>e.gender===this.gender):e,this.index<0&&(this.index=0),this.$nextTick(e=>{this.swiper&&this.swiper.updateSlides()})},recordLoad(e){App.resetFixedVesselPicStyle(e.target,200,200)}},props:{gender:Number,progress:Number,isPlay:Boolean},watch:{index(e){e>=this.list.length-2&&this.getList(),this.$emit("change",this.list[e],e),-1===e&&this.swiper&&this.swiper.emit("slideChangeTransitionStart"),0===e&&this.swiper&&this.swiper.emit("slideChangeTransitionEnd")},gender(){this.isFirstRequest=!0,this.index=-1,this.list=[],this.swiper.destroy(),c.call(this)},list(e){this.$emit("list-change",e.length)}}},S=(i(41),Object($.a)(E,A,[],!1,null,null,null));S.options.__file="src/components/Card.vue";var H=S.exports,O=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"wp",class:["zx-play-schedule-component",this.progress?"_progress":""]},[t("i",{directives:[{name:"show",rawName:"v-show",value:1!==this.progress,expression:"progress !== 1"}],ref:"dot",staticClass:"dot"}),this._v(" "),t("div",{staticClass:"_mask"}),this._v(" "),t("canvas",{ref:"canvas"})])};O._withStripped=!0;var L={beforeDestroy(){o(this.schedule)},computed:{$dot(){return this.$refs.dot},$canvas(){return this.$refs.canvas},ctx(){return this.$canvas.getContext("2d")}},created(){App.on("wrapper-showed",e=>{this.init()})},methods:{init(){this.width=2*this.$refs.wp.offsetWidth,this.height=2*this.$refs.wp.offsetHeight,this.$canvas.width=this.width,this.$canvas.height=this.height,this.ctx.strokeStyle="#7671DB",this.ctx.lineWidth=7},drawCircle(e,t,i){this.ctx.beginPath(),this.ctx.arc(e,e,t,0,i*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()},schedule(){this.drawCircle(this.width/2,this.width/2-6,2*this.progress),this.$dot.style.transform=`rotate(${90+360*this.progress}deg)`}},props:{progress:{type:Number,default:0}},watch:{progress(e){0===e&&this.ctx.clearRect(0,0,this.width,this.height),e<=2&&n(this.schedule)}}},N=(i(43),Object($.a)(L,O,[],!1,null,null,null));N.options.__file="src/components/PlaySchedule.vue";var q=N.exports,j=function(){var e=this.$createElement;return(this._self._c||e)("div",{class:["praise",this.state],on:{click:this.handlePraise}})};j._withStripped=!0;var V={beforeDestroy(){this.timer&&clearTimeout(this.timer)},data:()=>({state:"",isPraised:!1,timer:null}),methods:{handlePraise(){this.isError||(this.state?this.state.indexOf("done")>=0&&(this.state="done shake",this.timer=setTimeout(e=>{this.state="done"},300)):(this.state="hide",this.timer=setTimeout(e=>{this.state="done shake-show"},300)),this.isPraised=!0)}},props:{isError:Boolean,item:{type:Object,required:!0,default:()=>({})}},watch:{item(){this.state="",this.isPraised=!1},isPraised(e){this.$emit("change","isPraised",e)}}},X=Object($.a)(V,j,[],!1,null,null,null);X.options.__file="src/components/Praise.vue";var I=X.exports,W=function(){var e=this.$createElement;return(this._self._c||e)("div",{directives:[{name:"show",rawName:"v-show",value:this.isNoCards,expression:"isNoCards"}],staticClass:"no-more-cards"},[this._v("卡片被你翻完啦")])};W._withStripped=!0;var F={props:{value:Boolean},data(){return{isNoCards:this.value}},watch:{value(e){this.isNoCards!==e&&(this.isNoCards=e)},isNoCards(e){this.$emit("input",e)}}},D=(i(45),Object($.a)(F,W,[],!1,null,null,null));D.options.__file="src/components/NoMoreCards.vue";var B=D.exports;let R=null;const Y={lat:30.57808,lng:104.063343};var Z={components:{ZxTag:T,ZxCard:H,ZxPlaySchedule:q,ZxPraise:I,NoMoreCards:B},mixins:[p],computed:{$toneArm(){return this.$refs.toneArm},swiper(){return this.$refs.card.swiper},isPrivate(){return 1===(this.currentCard||{}).uid},cardLabel(){const e=k(this.currentCard,Y);return this.isPrivate?"Private card that only you can see":e<100?"You have met":e<=1e3?e+"m away":parseInt(e/1e3)+"km away"},privateBtnVisible(){return this.playTimes>=1&&this.isPraised&&!this.isSentPrivateCard}},data:()=>({isError:!0,isPlay:!1,progress:0,animeTimer:null,playTimes:0,isTouchOnArm:!1,gender:0,isSentPrivateCard:!1,isPraised:!1,total:0,currentCard:null,currentIndex:-1,isNoCards:!1,$wrapper:null,$audio:null}),methods:{tagChange(e){this.gender=e},cardChange(e,t){this.currentCard=e,this.currentIndex=t,this.progress=0;try{this.$audio.currentTime=0}catch(e){console.error(e)}this.playTimes=0,this.isPlay=!1,this.isError=!1,this.isSentPrivateCard=!1,this.$audio.src=function(e){try{return e.url.url}catch(e){return}}(e),App.emit("audio-change")},play(){try{!this.isPlay&&this.total>0&&this.$audio.play()}catch(e){console.error(e)}},pause(){this.isPlay&&this.$audio.pause()},clickPlay(e){this.isPlay?this.pause():this.play()},_audioHandler(e){const t=e.type;switch(console.log(t),t){case"error":this.isError=!0;break;case"pause":case"play":break;case"ended":this.playTimes+=1,this.$nextTick(e=>{this.progress=1;let t=setTimeout(e=>{this.progress=0,clearTimeout(t),t=null},300)})}this.isPlay="play"===t},_canplayHandler(e){switch(this.isError=!1,e.type){case"canplay":this.play()}},_anime(){var e;this.progress<=1&&(this.progress=(e=this.$audio.currentTime/this.$audio.duration,isNaN(e)?0:e),this.animeTimer=n(this._anime))},next(){this.currentCard&&this.total!==this.currentIndex+1?this.swiper&&this.swiper.slideNext():this.isNoCards=!0},sendPrivate(){console.log("sendPrivate"),this.currentCard&&alert("Interact with native app")},praiseStateChange(e,t){App.log(e,t),this[e]=t},keyupHandler(e){32===e.keyCode&&this.clickPlay(e)}},mounted(){const e=document.createElement("audio");e.style.display="none",this.$audio=e,App.emit("init-audio-end",e);const t=App.query("body");t.appendChild(this.$audio),d.call(this);window.innerWidth/window.innerHeight<750/1624&&(t.style.backgroundSize="auto 100%"),this.$wrapper=this.$refs.wp,this.$nextTick(e=>{/Android\s?5\./.test(App.userAgent)?(console.error(App.userAgent),b(this,Y)):b(this,Y)}),document.addEventListener("keyup",this.keyupHandler)},watch:{isPlay(e){e?(this._anime(),this.$toneArm.style.transform="rotate(42deg)"):(o(this.animeTimer),this.$toneArm.style.transform="rotate(0)")},playTimes(e){console.log("play times: "+e)},isNoCards(e){e&&!R&&(R=setTimeout(e=>{this.isNoCards=!1,clearTimeout(R),R=null},2e3))}}},J=(i(47),Object($.a)(Z,s,[],!1,null,null,null));J.options.__file="src/components/index.vue";var G=J.exports,Q=function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"wave",staticClass:"wave-wrapper"})};Q._withStripped=!0;var U=i(35),K=i.n(U),ee={data:()=>({audio:null,waveSurfer:null,resizeHandler:null}),created(){App.on("init-audio-end",e=>{this.audio=e,this.waveSurfer=K.a.create({container:this.$refs.wave,waveColor:"rgba(255, 255, 255, 0.5)",cursorColor:"rgba(255, 255, 255, 0.3)",progressColor:"#54549f",backend:"MediaElement"}),this.resizeHandler=this.waveSurfer.util.debounce(()=>{this.waveSurfer.empty(),this.waveSurfer.drawBuffer()},150),window.addEventListener("resize",this.resizeHandler)}),App.on("audio-change",()=>{console.log("audio-change"),this.$nextTick(()=>{this.waveSurfer.load(this.audio)})})},beforeDestroy(){App.off("init-audio-end"),App.off("audio-change"),window.removeEventListener("resize",this.resizeHandler)}},te=(i(49),Object($.a)(ee,Q,[],!1,null,null,null));te.options.__file="src/components/Wave.vue";var ie={components:{MusicCard:G,WaveWrapper:te.exports}},re=Object($.a)(ie,a,[],!1,null,null,null);re.options.__file="src/components/App.vue";var ae=re.exports;new r.a({el:"#app",render:e=>e(ae)})}]);